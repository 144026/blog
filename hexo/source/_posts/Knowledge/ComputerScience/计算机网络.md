---
title: 计算机网络
date: 2020-09-20 23:35:14
tags:
- 计网
categories:
- 知识
- 计算机

mathjax: true
---

计算机网络课程学习笔记。

<!--more-->

# 0 课程概述

**教学内容**
- knowledge/工作原理：协议、架构、应用
- skills/网络编程：wireshark、socket、ns3网络仿真、设计和实现协议
- insights/关键概念：协议、分层、资源分配、命令(?)

**教学目标**
- 计网核心概念和原理 $\longrightarrow$ 架构与协议设计
- 网络及主要通信协议的性能 $\longrightarrow$ 性能评估
- 网络通信的研究方法 $\longrightarrow$ 系统方法：目标、需求、设计、实现、测试、评估

**教学方式**
- 平台：微助教等
- 教材：计网-系统方法、计网-自顶向下、计网-分层方法
- 工具：wireshark, ns3, etc.

**教学计划**

<img src="https://raw.githubusercontent.com/144026/rsrc/master/img/20200921193139.png" style="zoom:50%;" />

**课程考核**
- 基本
    - 平时 .3
        - 作业 .2
        - 笔记 .1
    - 考试 .4
    - 课程设计 .3
- 奖励分 $\leq$ .05
    - 赛课结合
    - 小讲师志愿者



# 1 计网基础
如何建造一个计算机网络?

**系统方法**
1. 研究目标：计算机网络系统
2. 需求分析：预期与手段
3. 系统设计：体系结构 $\rightarrow$ 模块设计
4. 系统实现：软件、硬件…
5. 系统测试：评估优化

## 1.1 目标
互联网是什么?
- 系统观点
    - 拓扑：节点、链路。冗余链路提升可靠性。
    - 通信：协议
- 服务观点
    - 提供应用间通信。可靠/不可靠(Best effort)传输。

如何设计?
- 链路+节点 $\longrightarrow$ 高效通信
- 架构、协议、应用、接口、管理

## 1.2 需求分析
### 1.2.1 可扩展的连通性——网络拓扑
节点间如何连接，以保证良好的可拓展性?

- 节点：计算机/中继设备。链路：连接节点的传输媒质。
  - 网络节点如何分配地址，如何寻址?

- 直连/间接连接：点到点、多点访问链路/**交换网络**
  - 如何利用节点地址，实现报文转发?

- 网络互联：多个网络+路由/网关 $\longrightarrow$ 网络的递归定义

- 可扩展性：如何估算网络的效用? $\eta \propto n^2$

### 1.2.2 高性价比的连通性——交换方式
**需求**
- 所有主机同时交换信息
- 及时响应突发通信
- 有效、公平共享网络资源

交换网络和复用技术
- 无交换/星状交换/…
- 无复用/时分复用/频分复用/码分复用/统计复用…

**电路交换**
1. 特点
- 发起通信时，建立端到端专用电路，直接传输raw data比特流；结束时自动释放链路。
  - 专用资源，不共享
  - 必须先建立呼叫连接
- 时分/频分网络资源，固定平均分配

2. 时序图
ppt
3. 方案评估

**分组交换**
1. 特点
- 端到端分组(数据包)传输，分组在路由中存储、排队转发，每个包享有全部网络带宽
  - 路由需要标识分组、计算转发路径 $\longrightarrow$ **header+分组数据**
  - 排队产生时延
  - 拥塞导致(路由器缓存溢出)丢包
- 统计复用网络资源：资源分配(传输的是谁的数据包)没有固定模式，各取所需

2. 时序图
ppt
3. 方案评估

报文交换
可以理解为只使用一个分组的分组交换。

**总结**
- 分组交换、统计复用：适合计算机通信(突发、随机)，资源利用率高
- 挑战：路由节点缓存耗尽 $\rightarrow$ 拥塞；分组交换服务质量无保障。


### 1.2.3 支持通用服务 赢者通吃 
如何支持大多数应用需求？
- 需求抽象 -> 基本通信模式
	- request/reponse 离散、突发
	- streaming 连续、稳定


现实网络条件下支持不同的应用。-> 故障处理
- 比特级：电磁干扰。
- 分组级：拥塞丢包/比特错误拒收。 丢失还是延迟？(timeout?)
- 节点/链路级：主机故障如何判断？


### 1.2.4 可管理性
- 管理规模扩展
- 如何扩大以承载更多流量？
- 更多用户加入如何管理？
- 如何管理网络故障？



## 1.3 开始设计 Architecture
分层的优缺点？
```shell
[+] 每层解决一部分问题。
[+] 易拓展。提供统一硬件接口，新增单个应用、硬件接口的开发量减少。
[-] 多层嵌套降低效率。
```
### 1.3.1 一些概念
- 实体、协议、P2P


# 2 OSI模型

# 开始连接
- 介质类型？
	- 发送
		- Non-Return Zero
        	- 全1 基线偏移
        	- 全0 空闲误判
        - 边沿脉冲表示0、1：$\eta =  50\%$
        - 4B/5B：$\eta = 80\%$
	- 纠错
        - 奇偶校验：1维/2维/2维plus（hamming code）
        - **CRC校验**
        - checksum
        	- 反码加法
	- 接入控制：冲突检测，随机调度？

## 多路访问控制

共享广播链路通信基本问题
- 干扰：多个节点同时发送
- 冲突：同时收到多个信号

解决
- 寻址
- Multi/Medium Access Control Protocol
	- 静态信道划分:集中管理，各节点复用信道资源
		- TDMA,CDMA,FDMA,OFDMA
	- 随机接入：独立接入
		- 冲突？随机退避重传
	- 轮转发送
		- 主节点轮询/令牌环网络

随机接入

何时发送？
- 任意时刻：Aloha
- 空闲时刻：CSMA(Carrier Sense Multiple Access)

何时停止发送？
- 发完停止
- 冲突时backoff

传输失败？
- 类型
	- collision: 丢失所有数据
	- interfere: 只解码一个信号（SNIR够大）
	- joint
- Backoff重传策略
	- 基于概率：p(每个时隙)
	- 基于窗口：冲传间隔(随机变量)$T\in[0,W-1]$
		- 窗口乘性减小$\longrightarrow W = W_0\cdot \beta^n$

以太网 IEEE 802.3

WLAN IEEE 802.11
# 应用

## 传统应用

### 电子邮件
SMTP、POP、IMAP

### 万维网
HTTP

### Web服务

## 多媒体应用

## 基础服务

### DNS
DNS解析
迭代查询
递归查询

DNS：缓存和更新记录


## 覆盖网络
CS/P2P
需求：可靠/带宽/时延

CS/P2P数学模型
BitTorrent
skype
CDN
